jQuery(document).ready(function(){var i=null,l=null,e=!0,t=!0,o=0,c=(jQuery(".t_pod a.jsLinkModalAudio, .aperturaUnica_cPodcast a.jsLinkModalAudio").click(function(a){podcastName=jQuery(this).parents(".t_pod, .aperturaUnica_cPodcast").find("a.datalayer_podcast").data("podcastname"),urlNoticia=jQuery(this).parents(".t_pod, .aperturaUnica_cPodcast").find("a.datalayer_podcast").attr("href"),r(modulo=u(),urlNoticia,podcastName,"escuchar","escuchar0"),centinelaEscuchar25=!0,centinelaEscuchar50=!0,centinelaEscuchar75=!0,centinelaEscuchar100=!0,i=setInterval(c,100,modulo,urlNoticia,podcastName)}),function(e,t,c){1==window.coronita.contentTypeAudio.audioModalBlock.audioContainerElement.children.length&&((audioElementCurrentModal=jQuery(".audioInModal")).on("loadeddata",function(){var a=audioElementCurrentModal[0].duration;o=audioElementCurrentModal[0].duration;audioElementCurrentModal.on("playing",function(){null!=l&&clearInterval(l),l=setInterval(n,1e3,0,0,a,audioElementCurrentModal,e,t,c)}),audioElementCurrentModal.on("ended",function(){centinelaEscuchar100&&(centinelaEscuchar100=!1,r(e,t,c,"escuchar","escuchar100"))})}),clearInterval(i))});function n(a,e,t,c,i,n,o){e=c[0].currentTime,digitalData.page.pageActivity.audio.duration=Math.round(t).toString(),c[0].paused?clearInterval(l):.25<=(a=0!=t?e/t:a)&&a<.5&&centinelaEscuchar25?("noticia podcast"==i?centinelaEscuchar25Detalle=!1:"bloque podcast"==i&&(centinelaEscuchar25Bloque=!1),centinelaEscuchar25=!1,r(i,n,o,"escuchar","escuchar25")):.5<=a&&a<.75&&centinelaEscuchar50?("noticia podcast"==i?centinelaEscuchar50Detalle=!1:"bloque podcast"==i&&(centinelaEscuchar50Bloque=!1),centinelaEscuchar50=!1,r(i,n,o,"escuchar","escuchar50")):.75<=a&&a<1&&centinelaEscuchar75&&("noticia podcast"==i?centinelaEscuchar75Detalle=!1:"bloque podcast"==i&&(centinelaEscuchar75Bloque=!1),centinelaEscuchar75=!1,r(i,n,o,"escuchar","escuchar75"))}function u(){return modulo="",modulo=jQuery("main").hasClass("datalayer_portada")?"home":jQuery("main").hasClass("datalayer_media")?"media":jQuery("main").hasClass("datalayer_seccion")?"seccion":jQuery("main").hasClass("datalayer_especial")?"especial":jQuery("main").find("article.contentDistributive")?"distributiva":"noticia relacionada"}function r(a,e,t,c,i){e=d(e),t=d(t);var n=c,a=a+"|"+t;"escuchar"===c&&(n="bbvahtml5"),digitalData.page.pageActivity.audio={id:e,nameOfPodcastDisplayed:a.toLowerCase(),url:e,player:n,quality:""},setTimeout(function(){var a=c,e=i;switch(digitalData.page.pageActivity.audio.duration=Math.round(o).toString(),a){case"escuchar":switch(e){case"escuchar0":digitalLink("Audio Player Start",digitalData);break;case"escuchar25":digitalLink("Audio Player 25",digitalData);break;case"escuchar50":digitalLink("Audio Player 50",digitalData);break;case"escuchar75":digitalLink("Audio Player 75",digitalData);break;case"escuchar100":digitalLink("Audio Player End",digitalData)}break;case"descargar":break;default:digitalData.page.pageActivity.audio.player=a,digitalLink("Audio Player Open",digitalData)}},2e3)}function d(a){for(var e=["[àáâãäª]","[ÀÁÂÄ]","[èéêë]","[ÉÈÊË]","[ìíîï]","[ÍÌÏÎ]","[òóôõö]","[ÓÒÖÔ]","[ùúûü]","[ÚÙÛÜ]","ñ","Ñ","ç","Ç","[ýÿ]","[ÝŸ]","[^A-Za-z0-9-/:. ]"],t=["a","A","e","E","i","I","o","O","u","U","n","N","c","C","y","Y",""],c=String(a),i=0;i<e.length;i++)var n=new RegExp(e[i],"g"),c=c.replace(n,t[i]);return c}jQuery(".detail_page .detContPodcast .audioPlayerContent a.play i").click(function(a){podcastName=jQuery(this).parents(".detContPodcast").data("podcastname"),urlNoticia=jQuery(this).parents(".detail_page").data("sticker-link"),"noticia podcast"==(modulo=jQuery(this).parents(".detContPodcast").data("modulo"))&&e?(r(modulo,urlNoticia,podcastName,"escuchar","escuchar0"),centinelaEscuchar25Detalle=!0,centinelaEscuchar50Detalle=!0,centinelaEscuchar75Detalle=!0,centinelaEscuchar100Detalle=!0):"bloque podcast"==modulo&&t&&(r(modulo,urlNoticia,podcastName,"escuchar","escuchar0"),centinelaEscuchar25Bloque=!0,centinelaEscuchar50Bloque=!0,centinelaEscuchar75Bloque=!0,centinelaEscuchar100Bloque=!0),centinelaEscuchar100="noticia podcast"==modulo?(centinelaEscuchar25=centinelaEscuchar25Detalle,centinelaEscuchar50=centinelaEscuchar50Detalle,centinelaEscuchar75=centinelaEscuchar75Detalle,centinelaEscuchar100Detalle):(centinelaEscuchar25=centinelaEscuchar25Bloque,centinelaEscuchar50=centinelaEscuchar50Bloque,centinelaEscuchar75=centinelaEscuchar75Bloque,centinelaEscuchar100Bloque),(detailBlockAudio=jQuery(this).parent().siblings(".progressLine").children("audio")).on("loadeddata",function(){var a=detailBlockAudio[0].duration;o=detailBlockAudio[0].duration;detailBlockAudio.on("playing",function(){null!=l&&clearInterval(l),l=setInterval(n,1e3,0,0,a,detailBlockAudio,modulo,urlNoticia,podcastName)}),detailBlockAudio.on("ended",function(){centinelaEscuchar100&&("noticia podcast"==modulo?centinelaEscuchar100Detalle=!1:"bloque podcast"==modulo&&(centinelaEscuchar100Bloque=!1),centinelaEscuchar100=!1,r(modulo,urlNoticia,podcastName,"escuchar","escuchar100"))})})}),jQuery(".detail_page .detContPodcast .audioPlayerContent a.pause i").click(function(a){"noticia podcast"==(modulo=jQuery(this).parents(".detContPodcast").data("modulo"))?e=!1:"bloque podcast"==modulo&&(t=!1)}),jQuery(".t_pod a.datalayer_podcast_mod, .aperturaUnica_cPodcast a.datalayer_podcast_mod").click(function(a){eventName=jQuery(this).data("event"),podcastName=jQuery(this).parents(".t_pod, .aperturaUnica_cPodcast").find("a.datalayer_podcast").data("podcastname"),urlNoticia=jQuery(this).parents(".t_pod, .aperturaUnica_cPodcast").find("a.datalayer_podcast").attr("href"),r(modulo=u(),urlNoticia,podcastName,eventName,"")}),jQuery(".detail_page .detContPodcast .component_media a.datalayer_podcast_block").click(function(a){eventName=jQuery(this).data("event"),podcastName=jQuery(this).parents(".detContPodcast").data("podcastname"),urlNoticia=jQuery(this).parents(".detail_page").data("sticker-link"),r(modulo=jQuery(this).parents(".detContPodcast").data("modulo"),urlNoticia,podcastName,eventName,"")})});
